{"version":3,"sources":["render.js"],"names":["const","render","lsKey","type","configs","al","name","root","array","miku","config","selected","done","i","push","slice","showTogglePrompt","renderEnabled","localStorage","div","document","createElement","innerHTML","buttons","reload","text","className","confirm","swal","content","then","value","do","newValue","querySelector","checked","undefined","removeItem","timer","parseVersion","renderScript","dataset","version","length","previousElement","remove","element","Math","floor","random","alt","title","src","classList","add","addEventListener","body","appendChild","onloaded","page","apiChecked","readyState","window"],"mappings":"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","file":"render.js","sourcesContent":["/* global page, swal */\r\n\r\nconst render = {\r\n  lsKey: 'render',\r\n  type: 'miku', // This is intended to be hard-coded\r\n  configs: {\r\n    al: {\r\n      name: 'ship waifu~',\r\n      root: 'render/al/',\r\n      array: [\r\n        'admiral_graf_spee_1.png',\r\n        'admiral_hipper_1.png',\r\n        'akagi_1.png',\r\n        'akashi_1.png',\r\n        'akashi_2.png',\r\n        'atago_1.png',\r\n        'atago_3.png',\r\n        'atago_4.png',\r\n        'atago_5.png',\r\n        'belfast_2.png',\r\n        'choukai_1.png',\r\n        'deutschland_1.png',\r\n        'enterprise_1.png',\r\n        'glorious_1.png',\r\n        'hammann_1.png',\r\n        'hammann_2.png',\r\n        'hammann_3.png',\r\n        'hatsuharu_1.png',\r\n        'kaga_1.png',\r\n        'kaga_2.png',\r\n        'kaga_3.png',\r\n        'laffey_1.png',\r\n        'laffey_2.png',\r\n        'laffey_3.png',\r\n        'prinz_eugen_3.png',\r\n        'san_diego_1.png',\r\n        'takao_3.png',\r\n        'unicorn_1.png',\r\n        'unicorn_2.png',\r\n        'unicorn_3.png',\r\n        'unicorn_4.png',\r\n        'unicorn_6.png',\r\n        'unicorn_7.png',\r\n        'unicorn_8.png',\r\n        'yamashiro_1.png',\r\n        'yamashiro_2.png',\r\n        'yamashiro_3.png',\r\n        'yukikaze_1.png'\r\n      ]\r\n    },\r\n    miku: {\r\n      name: 'miku ❤️~',\r\n      root: 'render/miku/',\r\n      array: []\r\n    }\r\n  },\r\n  config: null,\r\n  selected: null,\r\n  done: false\r\n}\r\n\r\n// miku: Generate an array of file names from 001.png to 050.png\r\nfor (let i = 1; i <= 50; i++) render.configs.miku.array.push(`${('00' + i).slice(-3)}.png`)\r\n\r\nrender.showTogglePrompt = () => {\r\n  const renderEnabled = !(localStorage[render.lsKey] === '0')\r\n  const div = document.createElement('div')\r\n  div.innerHTML = `\r\n    <div class=\"field\">\r\n      <div class=\"control\">\r\n        <label class=\"checkbox\">\r\n          <input id=\"swalRender\" type=\"checkbox\" ${renderEnabled ? 'checked' : ''}>\r\n          Enable random render of ${render.config.name}\r\n        </label>\r\n      </div>\r\n      <p class=\"help\">If disabled, you will still be able to see a small button on the bottom right corner of the screen to re-enable it.</p>\r\n    </div>\r\n  `\r\n\r\n  const buttons = {}\r\n  if (renderEnabled) {\r\n    buttons.reload = {\r\n      text: 'Nah fam, show me a different render',\r\n      className: 'swal-button--cancel'\r\n    }\r\n  }\r\n  buttons.confirm = true\r\n\r\n  swal({\r\n    content: div,\r\n    buttons\r\n  }).then(value => {\r\n    if (value === 'reload') {\r\n      render.do(true)\r\n    } else if (value) {\r\n      const newValue = div.querySelector('#swalRender').checked ? undefined : '0'\r\n      if (newValue !== localStorage[render.lsKey]) {\r\n        if (newValue) localStorage[render.lsKey] = newValue\r\n        else localStorage.removeItem(render.lsKey)\r\n        swal('', `Random render is now ${newValue ? 'disabled' : 'enabled'}.`, 'success', {\r\n          buttons: false,\r\n          timer: 1500\r\n        })\r\n        render.do()\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nrender.parseVersion = () => {\r\n  const renderScript = document.querySelector('#renderScript')\r\n  if (renderScript && renderScript.dataset.version) return `?v=${renderScript.dataset.version}`\r\n  else return ''\r\n}\r\n\r\nrender.do = reload => {\r\n  if (!render.done) render.done = true\r\n\r\n  render.config = render.configs[render.type]\r\n  if (!render.config || !render.config.array.length) return\r\n\r\n  const previousElement = document.querySelector('body > .render')\r\n  if (previousElement) previousElement.remove()\r\n\r\n  const doRender = () => {\r\n    if (typeof render.version === 'undefined') {\r\n      render.version = render.parseVersion()\r\n    }\r\n\r\n    // Let us just allow people to get new render when toggling the option\r\n    render.selected = render.config.array[Math.floor(Math.random() * render.config.array.length)]\r\n    element = document.createElement('img')\r\n    element.alt = element.title = render.config.name\r\n    element.className = 'is-hidden-mobile'\r\n    element.src = `${render.config.root}${render.selected}${render.version}`\r\n  }\r\n\r\n  let element\r\n  if (!reload && localStorage[render.lsKey] === '0') {\r\n    element = document.createElement('a')\r\n    element.className = 'button is-info is-hidden-mobile'\r\n    element.title = render.config.name\r\n    element.innerHTML = '<i class=\"icon-picture\"></i>'\r\n  } else {\r\n    doRender()\r\n  }\r\n\r\n  element.classList.add('render')\r\n  element.addEventListener('click', render.showTogglePrompt)\r\n  document.body.appendChild(element)\r\n}\r\n\r\nrender.onloaded = () => {\r\n  // If the main script had already done its API check, yet render haven't been triggered, do it\r\n  // This would only happen if this render script only gets loaded after the main script's API check\r\n  if (typeof page !== 'undefined' && page.apiChecked && !render.done) {\r\n    render.do()\r\n  }\r\n}\r\n\r\nif (document.readyState === 'interactive' || document.readyState === 'complete') {\r\n  render.onloaded()\r\n} else {\r\n  window.addEventListener('DOMContentLoaded', () => render.onloaded())\r\n}\r\n"]}